# Google Spanner



# TOKEN LIST

"Generated by spanner. Search Column

This will be the concatenation of of both displayName and FromEmail. See discussion here.

DDL:
TOKENLIST_CONCAT([TOKENIZE_FULLTEXT(FromName)
TOKENIZE_FULLTEXT(FromEmail)])"""


Even I am not much into search so don't want to tell any inaccurate info Helen. 
@dvarelaalvarado
 and 
@nimmyr
 are working on Search.



# -------
Auid -> removed
so AuidNext, AuidValidity


Mailbox
UserAttributes          -> INTERLEAVE in Mailbox -> PRIMARY KEY (Sid, AttrId)
Label                   -> INTERLEAVE in Mailbox -> PRIMARY KEY (Sid, Id)
LabelMessageReference   -> INTERLEAVE in Mailbox -> PRIMARY KEY (Sid, LabelId, Uid, MsgId)
EmailDerivedEntity      -> INTERLEAVE in Mailbox -> PRIMARY KEY (Sid, EntityId)                     
EdeMessageReference     -> INTERLEAVE in Mailbox -> PRIMARY KEY (Sid, LabelId, EntityId, MsgId)
Message                 -> INTERLEAVE in Mailbox -> PRIMARY KEY (Sid, Id)
MessageReference        -> INTERLEAVE in Mailbox -> PRIMARY KEY (Sid, AcctId, Id, MsgId DESC)

Before Message Creation:
CREATE LOCALITY GROUP MsgLgInfreqAccessSet1;
CREATE LOCALITY GROUP MsgLgSearchSet1;


UserAttributes          -> DELETION POLICY (OLDER_THAN(ExpiryTsMs, INTERVAL 0 DAY)
EmailDerivedEntity      -> DELETION POLICY (OLDER_THAN(PurgeTsMs, INTERVAL 1 DAY)



# DBBeaver
https://www.cdata.com/kb/tech/googlespanner-jdbc-dbvr.rst



# CLIENT DBSCHEMA

jdbc:cloudspanner://localhost;Project=test-project-123456;Instance=test-instance;Database=test;


jdbc:cloudspanner://localhost;Project=gcp-mail-core-data-d-api-poc;Instance=cm-dev-custom-sandbox;Database=hmaryt-db;


jdbc:cloudspanner:/projects/gcp-mail-core-data-d-api-poc.instances/cm-dev-custom-sandbox/databases/hmaryt-db;credentials=~/athenz/gcp/cfg-mail.core.data.d-api-poc-gcp.fed.power.user.json



# Get All Tables Available

SELECT 
    t.table_name
FROM
    information_schema.tables AS t
WHERE
    t.table_catalog='' and
    t.table_schema=''

# Rename a database in spanner
- Cannot be rename.

# How to copy a database from one database.



